<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<!-- 
	fetch(); : 네트워크의 리소스를 쉽게 비동기적으로 취득할 수도 있습니다.
			   요청과 응답 등의 요소를 JavaScript에서 접근하고 조작할 수 있는 인터페이스를 제공
			   ** 서버로부터 자원을 받아서 반환함 => response 한테 반환
 -->
<script type="text/javascript">
/*
	const myPromise = fetch('https://jsonplaceholder.typicode.com/todos?_limit=5');
	
	myPromise
	.then((response) => {
		console.log('response : ', response); // status 가 400번대면 클라이언트 오류, 500번대 서버오류, 200번대 정상
	})
	.catch((err) => {
		console.log('err : ', err);
	})
*/

	// 한번에 쓰는 방식, 체인 방식
	fetch('https://jsonplaceholder.typicode.com/todos?_limit=5')
	.then((response) => {
		// console.log('response : ', response);
		// 성공해서 가져온 response 데이터가 json 이므로 response.json() 처리하면 
		// json() 형식의 데이터도 처리할 수 있다.
		return response.json();
	})
	.then((data) => { // 인자 이름은 상관없음
		// 첫번째 then 에서 return 한 정보를 받아서 처리할 수 있다.
		// data 란 위에서 넘어온 response.json() 을 뜻한다.
		console.log('data : ', data);
		// 넘어온 배열을 하나씩 검사 해서 id 가 3 초과한 데이터만 return 하자
		return data.filter(obj => obj.id > 3);
	})
	.then((result) => { // 인자 이름은 상관없음
		// 위에 then 에서 return 한 id 가 3 초과한 데이터를 result 로 지정
		console.log('result : ', result);
	})
	.catch(err => console.log('err : ', err)) // 인자하나, 내용 한줄이라 (), {} 생략 가능
	.finally(() => {console.log('finally !!')})
</script>
 
</body>
</html>